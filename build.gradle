plugins {
    id 'java'
    id 'application'
}

application {
    mainClassName 'bank.Server'
}

repositories {
    jcenter()
    flatDir { dirs 'lib' }
}

sourceCompatibility = 11
targetCompatibility = 11
compileJava.options.encoding = 'UTF-8'
compileTestJava.options.encoding = 'UTF-8'

dependencies {
    implementation 'org.glassfish.tyrus:tyrus-client:1.16'
    implementation 'org.glassfish.tyrus:tyrus-container-grizzly-server:1.16'
    implementation ':bank-core:'
}


jar {
    baseName 'bank-server-websocket'
    manifest {
        attributes 'Main-Class': 'bank.Server'
    }
    // Will include every single one of your dependencies, project or not
    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
}